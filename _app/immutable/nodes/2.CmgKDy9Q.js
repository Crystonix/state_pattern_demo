import"../chunks/DsnmJJEf.js";import{i as P}from"../chunks/Dt52q9jX.js";import{aY as R,a5 as h,aT as Q,w as X,i as Z,aZ as $,a_ as G,a$ as M,t as H,e as T,ar as V,p as j,aV as C,ac as ee,K as w,ad as U,Q as g,R as _,U as m,V as S,Y as v,W as c,X as d,T as I,b0 as A,aB as E,aW as B}from"../chunks/ujHX6NxP.js";import{s as te,d as ae}from"../chunks/BDLBPH1L.js";import{p as z,i as re,c as se}from"../chunks/BbanVfno.js";import{r as k}from"../chunks/DFHplnlF.js";function O(e,t,a=!1){if(e.multiple){if(t==null)return;if(!Z(t))return $();for(var r of e.options)r.selected=t.includes(y(r));return}for(r of e.options){var s=y(r);if(G(s,t)){r.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function ne(e){var t=new MutationObserver(()=>{O(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),X(()=>{t.disconnect()})}function Y(e,t,a=t){var r=new WeakSet,s=!0;R(e,"change",n=>{var i=n?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(i),y);else{var o=e.querySelector(i)??e.querySelector("option:not([disabled])");l=o&&y(o)}a(l),h!==null&&r.add(h)}),Q(()=>{var n=t();if(e===document.activeElement){var i=M??h;if(r.has(i))return}if(O(e,n,s),s&&n===void 0){var l=e.querySelector(":checked");l!==null&&(n=y(l),a(n))}e.__value=n,s=!1}),ne(e)}function y(e){return"__value"in e?e.__value:e.value}function F(e,t,a=t){var r=new WeakSet;R(e,"input",async s=>{var n=s?e.defaultValue:e.value;if(n=N(e)?W(n):n,a(n),h!==null&&r.add(h),await H(),n!==(n=t())){var i=e.selectionStart,l=e.selectionEnd,o=e.value.length;if(e.value=n??"",l!==null){var u=e.value.length;i===l&&l===o&&u>o?(e.selectionStart=u,e.selectionEnd=u):(e.selectionStart=i,e.selectionEnd=Math.min(l,u))}}}),(j&&e.defaultValue!==e.value||T(t)==null&&e.value)&&(a(N(e)?W(e.value):e.value),h!==null&&r.add(h)),V(()=>{var s=t();if(e===document.activeElement){var n=M??h;if(r.has(n))return}N(e)&&s===W(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function L(e,t,a=t){R(e,"change",r=>{var s=r?e.defaultChecked:e.checked;a(s)}),(j&&e.defaultChecked!==e.checked||T(t)==null)&&a(e.checked),V(()=>{var r=t();e.checked=!!r})}function N(e){var t=e.type;return t==="number"||t==="range"}function W(e){return e===""?null:+e}class q{constructor(t,a){this.context=t,this._data=a}_data;get data(){return this._data}set data(t){this._data=t,this.context.currentData=this._data,console.log(`[${this.constructor.name}] Data updated`,this._data)}}class ie extends q{constructor(t){super(t,{name:"",email:""})}next(){if(!this.data.name.trim()||!this.data.email.trim()){console.warn("Please fill in both name and email before proceeding.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.data.email)){console.warn("Please enter a valid email address.");return}this.context.next()}prev(){this.context.prev()}display(){return"User Info Step"}}class le extends q{constructor(t){super(t,{theme:"light",notifications:!0,newsletter:!1})}next(){if(this.data.newsletter)this.context.steps.findIndex(a=>a instanceof D)===-1&&this.context.steps.splice(this.context.currentIndex+1,0,new D(this.context));else{const t=this.context.steps.findIndex(a=>a instanceof D);t>-1&&this.context.steps.splice(t,1)}this.context.next()}prev(){this.context.prev()}display(){return"Preferences Step"}}class D extends q{constructor(t){super(t,{frequency:"weekly"})}next(){this.context.next()}prev(){this.context.prev()}display(){return"Newsletter Preferences"}}class oe extends q{constructor(t){super(t,null)}next(){this.context.next()}prev(){this.context.prev()}display(){return"Review Step"}}class ce{#e=C(ee([]));get steps(){return w(this.#e)}set steps(t){U(this.#e,t,!0)}#t=C(0);get currentIndex(){return w(this.#t)}set currentIndex(t){U(this.#t,t,!0)}constructor(t){this.steps=t.map(a=>new a(this))}get currentState(){return this.steps[this.currentIndex]}set currentState(t){const a=this.steps.indexOf(t);a!==-1?this.currentIndex=a:console.warn("[WizardStore] Tried to set unknown state")}set currentData(t){this.steps[this.currentIndex].data=t}next(){this.currentIndex<this.steps.length-1&&(this.currentIndex+=1)}prev(){this.currentIndex>0&&(this.currentIndex-=1)}get isFirstStep(){return this.currentIndex===0}get isLastStep(){return this.currentIndex===this.steps.length-1}getAllData(){return this.steps.reduce((t,a)=>a.data&&typeof a.data=="object"?{...t,...a.data}:t,{})}}const p=new ce([ie,le,oe]);var de=_('<div class="flex flex-col gap-2"><label for="name">Name:</label> <input id="name" type="text" placeholder="Name" class="border p-2 rounded"/> <label for="email">Email:</label> <input id="email" type="email" placeholder="Email" class="border p-2 rounded"/></div>');function ue(e,t){g(t,!1);let a=z(t,"state",12);P();var r=de(),s=v(c(r),2);k(s);var n=v(s,4);k(n),d(r),F(s,()=>a().data.name,i=>a(a().data.name=i,!0)),F(n,()=>a().data.email,i=>a(a().data.email=i,!0)),m(e,r),S()}var ve=_('<div class="flex flex-col gap-4"><div class="flex flex-col"><label for="theme" class="font-medium mb-1">Theme:</label> <select id="theme" class="border rounded p-2"><option>Light</option><option>Dark</option></select></div> <div class="flex items-center gap-2"><input type="checkbox" id="notifications" class="w-4 h-4"/> <label for="notifications">Enable notifications</label></div> <div class="flex items-center gap-2"><input type="checkbox" id="newsletter" class="w-4 h-4"/> <label for="newsletter">Subscribe to newsletter</label></div></div>');function fe(e,t){g(t,!1);let a=z(t,"state",12);P();var r=ve(),s=c(r),n=v(c(s),2);I(()=>{a(),A(()=>{})});var i=c(n);i.value=i.__value="light";var l=v(i);l.value=l.__value="dark",d(n),d(s);var o=v(s,2),u=c(o);k(u),E(2),d(o);var b=v(o,2),x=c(b);k(x),E(2),d(b),d(r),Y(n,()=>a().data.theme,f=>a(a().data.theme=f,!0)),L(u,()=>a().data.notifications,f=>a(a().data.notifications=f,!0)),L(x,()=>a().data.newsletter,f=>a(a().data.newsletter=f,!0)),m(e,r),S()}var he=_('<div class="p-2 bg-gray-50 rounded border"><h3 class="font-semibold mb-2">Review your data:</h3> <pre> </pre></div>');function pe(e,t){g(t,!0);let a=B(()=>p.getAllData());var r=he(),s=v(c(r),2),n=c(s,!0);d(s),d(r),I(i=>te(n,i),[()=>JSON.stringify(w(a),null,2)]),m(e,r),S()}var xe=_('<div class="flex flex-col gap-4"><div class="flex flex-col"><label for="frequency" class="font-medium mb-1">Newsletter Frequency:</label> <select id="frequency" class="border rounded p-2"><option>Daily</option><option>Weekly</option><option>Monthly</option></select></div> <p class="text-sm text-gray-600">Select how often you want to receive the newsletter.</p></div>');function me(e,t){g(t,!1);let a=z(t,"state",12);P();var r=xe(),s=c(r),n=v(c(s),2);I(()=>{a(),A(()=>{})});var i=c(n);i.value=i.__value="daily";var l=v(i);l.value=l.__value="weekly";var o=v(l);o.value=o.__value="monthly",d(n),d(s),E(2),d(r),Y(n,()=>a().data.frequency,u=>a(a().data.frequency=u,!0)),m(e,r),S()}var _e=()=>p.currentState.prev(),be=()=>p.currentState.next(),ye=_('<div class="w-full max-w-sm p-6 bg-white shadow-lg rounded-lg"><!> <div class="flex justify-between w-full mt-6"><button class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">Prev</button> <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">Next</button></div></div>'),we=_('<div class="min-h-screen bg-gray-50 flex flex-col items-center justify-start py-10"><!></div>');function ge(e,t){g(t,!0);const a=new Map;a.set("UserInfoState",ue),a.set("PreferencesState",fe),a.set("NewsletterState",me),a.set("ReviewState",pe);let r=B(()=>a.get(p.currentState?.constructor.name));var s=we(),n=c(s);{var i=l=>{var o=ye(),u=c(o);se(u,()=>w(r),(J,K)=>{K(J,{get state(){return p.currentState}})});var b=v(u,2),x=c(b);x.__click=[_e];var f=v(x,2);f.__click=[be],d(b),d(o),I(()=>{x.disabled=p.isFirstStep,f.disabled=p.isLastStep}),m(l,o)};re(n,l=>{w(r)&&l(i)})}d(s),m(e,s),S()}ae(["click"]);function De(e){ge(e,{})}export{De as component};
